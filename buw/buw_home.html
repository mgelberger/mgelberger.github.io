<!DOCTYPE html>
<html lang="en">
<head>

  <title>Boston Under Water</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   <link rel="stylesheet" href="BUW.css">
   <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>

  #set-height {
    display: block;

  }
  #wrapper {
    position: fixed;
    top: 101px;
    left: 28%;
    width: 70%;
    display: table;
  }
  #v0 {
    
    width: 100%;
    z-index:-1;
    
  }
  #overlay {
    z-index: 0;
    position: absolute;
    width: 100%;
    left: 0px;
    top: 0px;
  }
  body {
    color: black;
    /*font-style: "Georgia";*/

  }

  .container {
    margin-left: 10px;
    
  }


</style>
</head>
<body id="override">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>

      <a class="navbar-brand" href="buw_home.html">
      	<img alt="Boston Under Water" src="BUW_Logo.png">
      </a>

    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="buw_home.html">History</a></li>
        <li><a href="help.html">How To Help</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <!-- empty for now -->
      </ul>
    </div>
  </div>
</nav>


  <div style = "margin-bottom: 50px;" id="set-height">
    <div class="container">
      <div class="row">

        <div class="col-xs-3">
            <div id="content"></div>
        </div>

        <div class="col-xs-9">
	    <div id="wrapper">
		    <video id="v0" tabindex="0" autobuffer="autobuffer" preload="preload">
                    <source src="digipro.mov"></source>
		    <p>Sorry, your browser does not support the &lt;video&gt; element.</p>
		    </video>
		    <div id="overlay">
		    </div>
	    </div>
        </div>

      </div>
    </div>
  </div>
  <div id="modals"></div>
  <p id="time"></p>

  <script>
    var data = [
    
      {
        top: -20,
        content: "<h2>Land Reclamation</h2>"
      },



      {
        top: 100,
        content: "In the early 1600s, approximately 1/6 of modern day Boston was underwater. The area was known to the locals as Shawmut. When William Blackstone, the first European settler in the area, first moved there in the 1620s, Boston was little more than a small peninsula surrounded by water and connected to mainland by a small land bridge named Roxbury Neck. Shawmut Peninsula was about 780 acres and was defined by three large hills called Copps Hill, Fort Hill and the Trimountain."
      },

      {
        top: 1500,
        content: "Boston was plagued by overpopulation until the mid 1800s, resulting in pressure on city resources. Officials resolved the issue by undertaking land reclamation efforts, which mainly consisted of demolishing the hills and using the soil to fill in the surrounding wetlands. This method and its results destroyed the local ecology, but solved sanitation problems that had been affecting the city."
      },

      {
        top: 2700,
        content: "The Boston we know now was beginning to take shape. Copps Hill became North End, Fort Hill became the Financial District, and Trimountain was now Beacon Hill. By the end of the 19th century, Back Bay and South End were completely filled in."
      },

      {
        top: 3600,
        content: "Under modern day environmental regulations, it is likely that land reclamation would not have been approved. There were a number of environmental changes that took place throughout the process. For example, the Mill pond and the bay itself, which were initially left as is, had to be filled in as prior fillings, dam, and railroad projects had all left the water stagnant and filthy. Most importantly, the landscape of the area was completely transformed once land reclamation was over."
      },

      {
        top: 4500,
        content: "<h2>Industrialization</h2>"
      },

      {
        top: 4800,
        content: "Another major global change overlapped with Boston’s 19th century land reclamation projects: The Industrial Revolution. It began in Britain in the late 1700s and later spread to the United States. Key advancements made during the Revolution were the development of the factory system, the creation of the steam engine, and, most importantly, the use of fossil fuels to power machines."
      },

      {
        top: 5800,
        content: "Massachusetts was one of the first places to adopt the new technologies. There, Francis Cabot Lowell established the first power loom and integrated textile mill and Samuel Slater set up the first cotton mill. Factories, mills, and railroads quickly sprung up across the country during the 1800s."
      },

      {
        top: 6600,
        content: "The Revolution did more than transform the American economy; it also altered the nation’s physical landscape. As noted above, the railroads directly led to more land reclamation. Furthermore, the Revolution increased urbanization and overall population growth throughout the US, including Boston, which had high numbers of industrial laborers."
      },

      {
        top: 8000,
        content: "Industrialization’s impact on the environment has been well documented. Fossil fuel powered factories dramatically increased pollution, leading to a globally felt greenhouse effect. More population means more demand for goods, causing a cycle of pollution. This has contributed to a steady stream of greenhouse gasses entering the atmosphere since the start of the Industrial Revolution."
      }
    ];

    var overlays = [
        {
		top: 400,
		bottom: 1400,
		type: "modal",
		buttonStyle:"top: 20%; left: 70%",
		button: "Beacon Hill",
		modal: {
			title: "Beacon Hill",
			body: "<p>It is a neighborhood of Federal-style rowhouses and is known for its narrow, gaslit streets and brick sidewalks. Today, Beacon Hill is regarded as one of the most desirable and expensive neighborhoods in Boston.</p>"
		}
	}
    ];

    var modals = "";
    for(var i = 0; i < overlays.length; i++) {
    	modals += '<div class="modal fade" id="modal-'+i+'" tabindex="-1" role="dialog">          <div class="modal-dialog" role="document">            <div class="modal-content">              <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                <h4 class="modal-title">'+overlays[i].modal.title+'</h4>              </div>              <div class="modal-body">                '+overlays[i].modal.body+'              </div>              <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>              </div>            </div>          </div>        </div>';
    }
    document.getElementById("modals").innerHTML = modals;

    var content = "";
    for(var i = 0; i < data.length; i++) {
      var item = data[i];
      content += "<div style=\"position:absolute; top:" + item.top + "px;\">" + item.content + "</div>";
    }
    document.getElementById("content").innerHTML = content;
    var video_height = 300;
    var frameNumber = 0, // start video at frame 0
        // lower numbers = faster playback
        playbackConst = 1500, 
        // get page height from video duration
        setHeight = document.getElementById("set-height"), 
        // select video element         
        vid = document.getElementById('v0'); 
        // var vid = $('#v0')[0]; // jquery option
	wrapper = document.getElementById('wrapper');
	overlay = document.getElementById('overlay');


    // dynamically set the page height according to video length
    vid.addEventListener('loadedmetadata', function() {
      setHeight.style.height = vid.duration * playbackConst + "px";
    });


    // Use requestAnimationFrame for smooth playback
    var prevO = "";
    function scrollPlay(){  
      var y = window.pageYOffset;
      var frameNumber  = y/playbackConst;
      vid.currentTime  = frameNumber;
      window.requestAnimationFrame(scrollPlay);

      var o = "";
      for(var i = 0; i < overlays.length; i++) {
	if(y >= overlays[i].top && y < overlays[i].bottom) o += '<button class="btn btn-lg btn-default" style="position:absolute;'+overlays[i].buttonStyle+'" data-toggle="modal" data-target="#modal-'+i+'">'+overlays[i].button+'</button>';
      }
      if(prevO !== o) {
        prevO = o;
        overlay.innerHTML = o;
      }
    }

    window.requestAnimationFrame(scrollPlay);

    function updateOverlayHeight() {
      overlay.style.height = vid.offsetHeight + "px";
    }

    window.addEventListener("resize", updateOverlayHeight);
    updateOverlayHeight();
  </script>

  


</body>
  <footer class="footer">
      <div class="navbar navbar-fixed-bottom">
      </div>
  </footer>

</body>

</html>


